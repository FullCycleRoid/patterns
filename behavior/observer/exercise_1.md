#### Задание 1. Реализовать две иерархии классов. Первая иерархия включает базовый класс Subject с конкретными методами Attach(observ), Detach(observ) и Notify и класс-потомок ConcreteSubject. Методы Attach и Detach имеют параметр-ссылку типа Observer и не возвращают значений. Метод Notify не имеет параметров и не возвращает значения; он является защищенным.

#### В классе Subject дополнительно описать поле observers. Это поле является структурой данных с элементами-ссылками типа Observer, в которой хранятся все наблюдатели, присоединенные в настоящий момент к субъекту (можно считать, что наблюдателей не более 10). В качестве такой структуры удобно использовать динамическую структуру, имеющую команды для добавления и удаления элементов. Метод Attach(observ) добавляет объект observ в структуру observers, метод Detach(observ) удаляет объект observ из данной структуры. В методе Notify выполняется перебор элементов структуры observers: для каждого элемента структуры вызывается его метод Update. При реализации метода Notify необходимо учесть ситуацию, когда во время выполнения метода Update некоторые наблюдатели отсоединятся от субъекта, что приведет к изменению структуры данных observers.

#### В классе ConcreteSubject описать поле state, которое имеет символьный тип и моделирует текущее состояние субъекта. С ним связаны два метода. Метод SetState(st) имеет символьный параметр st; если этот параметр не равен текущему значению поля state, то метод изменяет поле state, присваивая ему значение параметра st, и дополнительно вызывает метод Notify; если параметр st совпадает с текущим значением поля state, то метод SetState не выполняет никаких действий. Метод GetState (без параметров) возвращает текущее значение поля state. Конструктор класса ConcreteSubject не имеет параметров, поле state инициализируется символом «пробел».

#### Вторая иерархия включает абстрактный класс Observer с абстрактным методом Update (не имеет параметров и не возвращает значения) и конкретный класс ConcreteObserver, имеющий строковое поле log, символьное поле detachInfo, поле subj — ссылку на объект типа ConcreteSubject, а также методы Attach, Detach и GetLog. Конструктор класса ConcreteObserver имеет параметры subj и detachInfo, которые инициализируют соответствующие поля; поле log инициализируется пустой строкой. Методы Attach и Detach не имеют параметров и не возвращают значения. В методе Attach выполняется вызов метода Attach объекта subj, в методе Detach выполняется вызов метода Detach объекта subj, причем в качестве параметра в обоих вызываемых методах передается ссылка на объект ConcreteObserver, инициировавший вызов этих методов. Метод GetLog не имеет параметров и возвращает значение поля log.

#### Метод Update, переопределяемый в классе ConcreteObserver, является основным методом, обеспечивающим взаимодействие между конкретным субъектом и конкретным наблюдателем. Именно этот метод вызывается конкретным субъектом при изменении его состояния. Таким образом, его вызов означает, что состояние конкретного субъекта изменилось, и наблюдатель может узнать это новое состояние, вызвав в методе Update метод GetState объекта subj. В данном задании в методе Update надо выполнить следующие дополнительные действия: добавить символ, полученный методом GetState, в конец поля log объекта ConcreteObserver, для которого был вызван метод Update, и, кроме того, если полученный символ совпадает со значением поля detachInfo, то немедленно отсоединить наблюдателя ConcreteObserver от субъекта subj, вызвав метод Detach наблюдателя.

#### Тестирование разработанной системы классов. Дано целое число N (≤ 10) и строка S, содержащая заглавные латинские буквы. Создать объект subj типа ConcreteSubject и коллекцию (например, массив) observers из N объектов типа ConcreteObserver, указав в качестве первого параметра конструктора объектов ConcreteObserver ссылку на объект subj, а в качестве второго параметра — заглавные латинские буквы, перебирая их в алфавитном порядке («A» для первого объекта коллекции observers, «B» для второго объекта и т. д.). Для каждого объекта ConcreteObserver вызвать его метод Attach. Затем для каждого символа из данной строки S вызвать метод SetState объекта subj, передав методу этот символ в качестве параметра. После обработки всех символов строки S вывести значения полей log объектов из коллекции observers, используя метод GetLog класса ConcreteObserver. Выведенные строки будут содержать все начальные символы строки S (без одинаковых соседних символов) вплоть до того символа, который вызвал отсоединение наблюдателя от объекта subj. 