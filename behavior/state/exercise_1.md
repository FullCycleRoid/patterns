#### Задание 1. Реализовать набор классов, связанных с разбором текста на основе паттерна State. Предполагается, что обрабатываемый текст включает обычное содержимое (токен Normal), строковые литералы, заключенные в двойные кавычки (токен String), и комментарии, заключенные в фигурные скобки (токен Comm). Фигурные скобки в строковых литералах считаются обычными символами, как и двойные кавычки в комментариях. Если в строковом литерале встречаются две двойных кавычки подряд, то они рассматриваются как обычный символ «двойная кавычка», входящий в строковый литерал. Комментарии не являются вложенными; открывающая фигурная скобка внутри комментария рассматривается как обычный символ.

#### Признаком конца разбираемого текста является наличие точки, которая не считается входящей в сам текст. В токены String не включаются обрамляющие кавычки, в токены Comm не включаются обрамляющие фигурные скобки. Если последний строковый литерал или комментарий не заканчивается требуемым символом (кавычкой или фигурной скобкой соответственно), то подобный фрагмент текста считается ошибочным токеном ErrString или ErrComm соответственно; такой токен должен содержать символы от начала строкового литерала или комментария вплоть до завершающей точки (не включая эту точку).

#### Любые виды токенов могут быть пустыми; в начале и конце текста, а также между специальными токенами String и Comm обязательно присутствует токен Normal (возможно, пустой). Исключением являются ошибочные токены ErrString и ErrComm, после которых разбор текста завершается.

#### Иерархия классов-состояний включает абстрактный класс State с абстрактным методом Handle (не имеет параметров, возвращает строку с описанием очередного токена разбираемого текста) и классы ConcreteStateNormal, ConcreteStateString, ConcreteStateComm и ConcreteStateFinal. Каждый конкретный класс, кроме класса ConcreteStateFinal, содержит поле ct — ссылку на объект Context — и поле ind целого типа, которые инициализируются в конструкторе с использованием соответствующих параметров. Поле ct определяет объект, содержащий разбираемый текст, а поле ind определяет индекс позиции, начиная с которой требуется продолжить разбор текста.

#### Метод Handle возвращает строку, содержащую полученный токен (возможно, пустой), перед которым указывается его тип и двоеточие (например, «Normal:abc», «ErrString:mn2», «Comm:»). Класс ConcreteStateFinal не содержит полей, его конструктор не выполняет дополнительных действий, а метод Handle всегда возвращает пустую строку.

#### После определения текущего токена Normal метод Handle класса ConcreteStateNormal вызывает метод SetState контекста ct, указывая в качестве параметра экземпляр класса ConcreteStateString (если обнаружен символ «двойная кавычка»), ConcreteStateComm (если обнаружен символ «{») или ConcreteStateFinal (если обнаружен символ «точка»).

#### После определения текущего правильного токена String или Comm метод Handle классов ConcreteStateString и ConcreteStateComm вызывает метод SetState контекста ct, указывая в качестве параметра экземпляр класса ConcreteStateNormal.

#### После определения ошибочного токена ErrString или ErrComm метод Handle классов ConcreteStateString и ConcreteStateComm вызывает метод SetState контекста ct с экземпляром класса ConcreteStateFinal.

#### Класс-контекст Context содержит строковое поле txt с разбираемым текстом и поле-ссылку st типа State. Конструктор класса имеет параметр txt, используемый для инициализации поля txt; поле st инициализируется объектом типа ConcreteStateNormal. Класс Context имеет методы GetCharAt(ind), SetState(st) и Request:

• метод GetCharAt возвращает символ поля txt с индексом ind (предполагается, что индекс находится в допустимом диапазоне);

• метод SetState изменяет поле st, присваивая ему значение параметра st (этот метод, наряду с методом GetCharAt, используется в методах классов-состояний);

• метод Request возвращает очередной токен разбираемого текста, вызывая метод Handle объекта st.

#### Тестирование разработанной системы классов. Дана строка, которая оканчивается точкой. Используя объект ct типа Context, выполнить разбор данной строки, вызывая метод Request объекта ct и выводя его возвращаемый результат, пока очередной вызов не вернет пустую строку (пустую строку выводить не следует). 